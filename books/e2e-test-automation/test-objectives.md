---
title: "テストの目的と「自動テスト」"
---

## 様々な種類のテスト

同じプロジェクト内でも、「テスト」の意味は人によって異なる場合がある。
![](https://storage.googleapis.com/zenn-user-upload/ae46745e8edd-20240922.png)

主なテストの種類と意味は以下の通り。

- **受け入れテスト**：仕様や契約条件を満たしているかの確認
- **単体テスト**：小さなコンポーネントの動作確認
- **監視**：本番環境での正常動作の定期確認
- **テストケース実行**：与えられたテストケースの実行とレポート作成
- **探索的テスト**：ユーザビリティや UX の問題点を発見
- **β テスト**：実際のユーザーによるバグ発見や使いやすさのフィードバック
- **A/B テスト**：2 つのデザインの効果を比較検証

テストの解釈は、ユーザー企業、開発者、システム運用担当者、テスターなど、立場によって異なる。

テストの目的は、機能確認から性能検証、ユーザー体験の改善まで多岐にわたる。

## テストの目的とアプローチ

テストの目的は下記の四象限に分類できる。

![](https://storage.googleapis.com/zenn-user-upload/70b0bb3efad5-20240923.png)
_アジャイルテストの四象限_

1. **ビジネス面でプロダクトを批評する**
   - 顧客やユーザーの視点からプロダクトの価値を評価する
2. **ビジネス面で開発者を導く**
   - ビジネス要件を明確にし、開発者がそれを満たすよう支援する
3. **技術面でプロダクトを批評する**
   - システムの品質や性能を技術的な観点から評価する
4. **技術面で開発者を導く**
   - コードの品質を確保し、技術的な正確性を保証する

上記 4 つの目的に適した、様々なテスト手法が存在している。

## 自動テストの目的とアプローチ

自動テストはどのような目的で行うのか？

### 仕様やユースケースを検証する

アプローチとしては以下になる。

1. **単体テスト・コンポーネントテスト**
   - ソフトウェアの一部分が期待した動作をすることを確認するために行う
   - 入出力が期待通りになるかをテストする
   - 自動化により繰り返しテストすることで、意図せぬ変更を防ぐ効果がある
2. **ストーリー受け入れテスト**
   - **ユーザーストーリー**を検証する
   - ある変更がユーザーに**どのような価値を提供するのか**を検証する
   - ユーザーストーリーに対して、ユーザー目線での操作手順や、ソフトウェアの期待する振る舞いをテストコードという形で表現する
   - 自動化により繰り返しテストすることで、意図せぬ変更を防ぐ効果がある

### 人の手で実施することが困難なケースを検証する

アプローチとしては以下になる。

1. **性能効率テスト・負荷テスト・セキュリティテスト**
   - 大量のネットワークリクエスト
   - 長時間同じ操作を繰り返し、負荷や時間に関わる問題を探索する
2. **ビジュアルリグレッションテスト**
   - 人間が目視でチェックするのには限界がある

## 手動で行うべきテスト

以下は自動で評価することができない。

- 何を解決したいのか？
- 便利に使えるか？
- 面白いか？

このような場合、以下のようなアプローチを用いる。

- プロトタイプシュミレーション
- ワークフローユーザビリティテスト
- 探索的テスト
- A/B テスト

## どのようなテストを自動化したいのか？

A.　**リグレッションテスト**

1. **特徴**
   - バグ修正や機能追加後に、それまでは正常に動作していた機能が停止するのを防ぐために行うテスト
   - **どこかを変える**度に、全てのテストケースを実施する必要がある
   - テストケースは増え続ける
   - テストのスコープ（範囲）は常にシステム全体
2. **手動で行うとどうなるか？**
   - ビジネスが発展し、機能が増え、システムが複雑になる程、テストの負荷は爆発的に高まる
3. **開発スコープとのギャップ**
   - 開発のスコープは限定的
   - 機能追加の場合、新規機能のコードを書いたり、既存機能と関係するコードを編集したりするだけで済む
   - 既存機能のテストが手動テストに依存していると、開発とテストの労力は常に不均衡
     ```
      機能追加にかける労力 < 他の部分が壊れていないことを確認する労力
     ```
     ![](https://storage.googleapis.com/zenn-user-upload/ec44940f2640-20240923.png)
4. **ギャップによって生じる問題**
   - すべてを手動テストするのが不可能なタイミングが訪れる
   - 開発者は検証されないままさらに追加の機能を開発しなければならない
   - 変更箇所だけが多くなると、バグが生じた際に原因の特定が困難になる

## 自動テストの目的

開発とテストの労力の不均衡を解消し、**安全にリリースできる状態を持続可能なコストにキープし続ける**。

機能を開発・修正した際に必要となるテストは、常にその影響範囲に対するテストコードを修正すれば済むようにする。
![](https://storage.googleapis.com/zenn-user-upload/7667be711284-20240923.png)

## 自動テストのメリット

1. **安全にリリースできる状態を持続可能なコストにキープし続ける**

   - 「自動テストの目的」に書いた通り。

2. **開発者がテストによるフィードバックを素早く受けられる**

   - 自動テストは、**今まで作ってきたものが、今も正しく動いている**ことを、いつでも教えてくれる。

3. **それぞれの機能が「どうのように動くのか」を教えてくれる**

   - テストコードにより把握できる

   ![](https://storage.googleapis.com/zenn-user-upload/23c4179f0943-20240923.png)
   _ユースケースのリストになる_

4. **継続的にテストできる**
   - 手動テストよりもコストを最適化できる

## 「テスト自動化」はアンチパターン

「自動テスト」は、ただ手動テストを自動化することではない。
それは「テスト自動化」であり、「自動テスト」ではない。

テスト自動化は上手くいかない。

### 手動テストに出来て自動テストに出来ないこと

手動テストでは、「**曖昧な変化**」に気づくことができる。

- ちょっとした画面レイアウトの崩れ
- 使い勝手の変化
- その他気になる挙動の変化
- バグの兆候

テストの責務は「バグを見つける」こと。
しかし、「バグを見つける」には 2 つのアクティビティがある。

1. システムが想定通りに動くか？
2. 仕様にかかれていなかったり、想定していなかった動作はないか？

つまり、想定通り正しく動くことの**確認**と、未知の動作を見つける**探索**を、手動テストでは暗黙的に行っている。

一方、自動テストは、言われたことしか実行してくれない**一番頭の固いテスター**。
手動テストが暗黙的に行なっていた**探索**は出来ない。

:::message

手動テストを自動化した「テスト自動化」では、テストの品質が落ちる。

:::

### 手動テストの実行サイクル

手動テストが実施されるのは、リリースの直前。

自動テストのメリットとして、「開発者がテストによるフィードバックを素早く受けられる」というのがあった。
手動テストを自動化しただけでは、このメリットを享受できない。
よって、**リリースサイクルそのものが縮まらない**。

### 「テスト自動化」は「手動テスト」と「自動テスト」の悪いところ取り

|              | 手動テスト       | テスト自動化     | 自動テスト   |
| ------------ | ---------------- | ---------------- | ------------ |
| 実行サイクル | リリースサイクル | リリースサイクル | 開発サイクル |
| 頻度         | 少               | 少               | 多           |
| 実行手順     | 柔軟             | 厳密             | 厳密         |
| 検証方法     | 発見的           | 保証的           | 保証的       |

手動テストにおけるメリットの一つが

- 想定通り正しく動くことの**確認**と、未知の動作を見つける**探索**を、暗黙的に行なってくれる

自動テストにおけるメリットの一つが

- 開発者がテストによるフィードバックを素早く受けられるため、リリースサイクルを短縮できる

「テスト自動化」は両者のメリットを握りつぶしてしまう。
