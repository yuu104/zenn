---
title: "【Playwright】並列実行"
---

## Playwright の仕様

デフォルトでは、テストファイルを並列に実行します。
実行環境が複数用意され、並行してテストが実行されます。
実行環境は独立しており、各環境で「ブラウザの起動」 → 　「テストファイル読み込み」 → 　「テスト実行」を行います。

デフォルトでは、論理 CPU コア数を参照し、その半分の数の実行環境が用意されます。
また、実行環境をできる限り再利用し、複数のテストファイルが 1 つの環境で続けて実行されるようにすることで、テストの高速化を図っています。

## 並列実行しないようにする設定

実行時に `--workers 1` オプションを設定することで、並列実行を防ぐことができる。

```shell
npx playwright test --workers 1
```

設定ファイルでも指定可能。

```ts
import { defineConfig } from "@playwright/test";

export default defineConfig({
  workers: 1,
});
```

## 並列実行の注意点

- 同じデータを扱うテストケースは、1 つのファイルにまとめて、並列実行されないようにする
- テストケースごとにテスト用のユーザーを割り振る
