---
title: "リージョン"
---

AWS が管理する物理サーバーは「リージョン」と「アベイラビリティゾーン」という形で構成されている。

## リージョン

![](https://storage.googleapis.com/zenn-user-upload/56c0a77d294c-20240924.jpg)

- AWS がデータセンターをホストする地理的な場所
- AWS リージョンは、そのリージョンが存在する場所にちなんで命名される
- リージョンは互いに独立しており、データはユーザーの同意と承認なしに、別リージョンに複製されることはない

## どのようにリージョンを選択すれば良いのか？

- レイテンシー
- 料金
- サービスの可用性
- データコンプライアンス

## アベイラビリティゾーン

![](https://storage.googleapis.com/zenn-user-upload/081e8a8ae23b-20240924.png)

- リージョンには、アベイラビリティゾーン（AZ）が存在する
- AZ は、冗長電源、ネットワーク、接続性を備えた 1 つ以上のデータセンターで構成される
- AZ のデータセンターは、非公開の場所にある隔離された施設で運用されている

AZ にはコード名がある。
リージョン内に配置されているため、リージョンコードの末尾に文字を追加する形式になっている。

- **us-east-1a**: us-east-1 (バージニア北部地域) の AZ
- **sa-east-1b**: sa-east-1 (サンパウロ地域) の AZ

## サービスの提供範囲

1. **AWS サービスの提供範囲は主に 3 つ**

   - アベイラビリティゾーン (AZ) レベル
   - リージョンレベル
   - グローバルレベル

2. **リージョンレベルのサービス**

   - 使いやすさ: リージョンを選ぶだけで利用開始できる
   - 自動高可用性: AWS 側が自動的に複数 AZ にデプロイ
   - データ保護: AWS が自動でデータの耐久性と可用性を確保
     - 複数 AZ でのデータ複製
     - 自動フェイルオーバー
     - 負荷分散
   - ユーザーの負担軽減: 複雑な設定なしで高可用性を実現

3. **AZ レベルのサービス**

   - より細かい制御: 使用する AZ を指定する必要がある
   - ユーザー責任: データの耐久性と高可用性はユーザーが確保
   - 慎重な設計: 複数 AZ を使った冗長構成などを自身で実装する必要がある

4. **サービス提供範囲の見分け方**

   - AZ の指定が不要 = リージョンレベルのサービス
   - AZ の指定が必要 = AZ レベルのサービス

5. **重要ポイント**
   - リージョンレベルサービスを使うと、AWS の自動化された高可用性設計の恩恵を受けられる
   - ただし、サービスによって具体的な実装方法は異なる場合がある
   - 災害復旧やクロスリージョン冗長性など高度な要件は、追加の設定が必要な場合もある

## 回復性の維持

1. **高可用性と回復性の重要性**

   - アプリケーションを常に利用可能にするためには、高可用性（いつでも使える）と回復性（問題が起きても素早く復旧できる）が必要です。

2. **クラウドアーキテクチャのベストプラクティス**

   - リージョン提供範囲内のマネージドサービスを使用すること
   - これらのサービスには、高可用性と回復性が最初から組み込まれています

3. **マネージドサービスが使えない場合の対策**

   - ワークロード（アプリケーションやシステム）を複数のアベイラビリティゾーン（AZ）に複製する
   - 最低でも 2 つの AZ を使用すること

4. **複数 AZ 使用の利点**

   - 1 つの AZ に障害が発生しても、別の AZ でアプリケーションを継続して運用できる
   - これにより、サービスの中断を最小限に抑えられる

5. **具体的な実装例**

   - 例えば、Web サーバーを 2 つ以上の AZ にデプロイし、ロードバランサーを使ってトラフィックを分散させる
   - データベースも複数の AZ にレプリケーションを設定し、プライマリに障害が発生した場合にセカンダリへ自動的に切り替わるようにする

6. **まとめ**
   - 可能な限り AWS のマネージドサービスを活用する
   - マネージドサービスが使えない場合は、必ず複数 AZ を使用してシステムを設計する
   - これらの方法により、システム全体の可用性と回復性を高めることができる

![](https://storage.googleapis.com/zenn-user-upload/d49521aa87e1-20240924.png)
