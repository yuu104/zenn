---
title: "å˜ä½“ãƒ†ã‚¹ãƒˆã®æ§‹é€ "
---

## AAA ãƒ‘ã‚¿ãƒ¼ãƒ³

ã€ŒAAAã€ã¨ã¯ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®æ§‹é€ ã«é–¢ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã“ã¨ã§ã™ã€‚
ä»¥ä¸‹ 3 ã¤ã®ãƒ•ã‚§ãƒ¼ã‚ºã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/d39132fce103-20250209.png =250x)

1. **æº–å‚™ï¼ˆArrangeï¼‰**
   - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®äº‹å‰æ¡ä»¶ã‚’æº€ãŸã™ã‚ˆã†ã«ãƒ†ã‚¹ãƒˆå¯¾è±¡ã¨ä¾å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç”¨æ„ã™ã‚‹
2. **å®Ÿè¡Œï¼ˆActï¼‰**
   - ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚’å®Ÿè¡Œã—ã€æ¤œè¨¼ã—ãŸã„ã€ŒæŒ¯ã‚‹èˆã„ã€ã‚’å®Ÿè¡Œã™ã‚‹
   - ã“ã®æ™‚ã€Arrange ã—ã¦ãŠã„ãŸä¾å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚å®Ÿè¡Œã•ã‚Œã‚‹
   - ãƒ¡ã‚½ãƒƒãƒ‰ã®æˆ»ã‚Šå€¤ã®ã‚ˆã†ã«ã€ã€ŒæŒ¯ã‚‹èˆã„ã€ã«ã‚ˆã‚ŠçµæœãŒè¿”å´ã•ã‚Œã‚‹å ´åˆã¯ã€æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆAssertï¼‰ã§ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ä¿æŒã—ã¦ãŠã
3. **ç¢ºèªï¼ˆAssertï¼‰**
   - å®Ÿè¡ŒçµæœãŒæœŸå¾…é€šã‚Šã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹
   - ã€Œå®Ÿè¡Œçµæœã€ã¨ã¯ã€ä»¥ä¸‹ãŒæƒ³å®šã•ã‚Œã‚‹
     - ãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ¡ã‚½ãƒƒãƒ‰ã®ã€Œæˆ»ã‚Šå€¤ã€
     - ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚„ä¾å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã€ŒçŠ¶æ…‹ã€
     - ãƒ†ã‚¹ãƒˆå¯¾è±¡ã«ã‚ˆã‚Šã€ä¾å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå‘¼ã³å‡ºã•ã‚ŒãŸã¨ã„ã†ã€Œè¨˜éŒ²ã€

å…·ä½“ä¾‹ã¨ã—ã¦ã€ä»¥ä¸‹ã®ã‚·ãƒ³ãƒ—ãƒ«ãªè¶³ã—ç®—ãƒ¡ã‚½ãƒƒãƒ‰ `sum` ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚

```java
// ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®Calculatorã‚¯ãƒ©ã‚¹
public class Calculator {
    public double sum(double first, double second) {
        return first + second;
    }
}
```

ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚

```java
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.assertEquals;

public class CalculatorTest { // é–¢é€£æ€§ã®ã‚ã‚‹ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’é›†ã‚ãŸã‚¯ãƒ©ã‚¹

    @Test // â† ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã™JUnitã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
    public void sum_of_two_numbers() { // â† ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’è¡¨ã™ãƒ¡ã‚½ãƒƒãƒ‰
        // Arrangeï¼ˆæº–å‚™ï¼‰ãƒ•ã‚§ãƒ¼ã‚º
        double first = 10;
        double second = 20;
        Calculator calculator = new Calculator();

        // Actï¼ˆå®Ÿè¡Œï¼‰ãƒ•ã‚§ãƒ¼ã‚º
        double result = calculator.sum(first, second);

        // Assertï¼ˆç¢ºèªï¼‰ãƒ•ã‚§ãƒ¼ã‚º
        assertEquals(30, result);
    }
}
```

1. **æº–å‚™ï¼ˆArrangeï¼‰**
   - ãƒ†ã‚¹ãƒˆã«ä½¿ç”¨ã™ã‚‹å€¤ï¼ˆ`first = 10`ã€`second = 20`ï¼‰ã‚’ç”¨æ„
   - ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®ã€ŒæŒ¯ã‚‹èˆã„ã€ã‚’å®Ÿè¡Œã™ã‚‹ `Calculator` ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆ
2. **å®Ÿè¡Œï¼ˆActï¼‰**
   - Arrange ã§ç”¨æ„ã—ãŸãƒ†ã‚¹ãƒˆå¯¾è±¡ã® `sum` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œ
   - Arrange ã§ç”¨æ„ã—ãŸå€¤ï¼ˆ`first`, `second`ï¼‰ã‚’ä½¿ç”¨
   - å®Ÿè¡Œçµæœã‚’ `result` å¤‰æ•°ã«ä¿æŒã—ã€æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºã§ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
3. **ç¢ºèªï¼ˆAssertï¼‰**
   - `assertEquals` ã‚’ä½¿ç”¨ã—ã¦ã€æœŸå¾…å€¤ `30` ã¨å®Ÿéš›ã®çµæœ `result` ã‚’æ¯”è¼ƒ
   - `assertEquals` ã¯ã€å¼•æ•°ã«æŒ‡å®šã—ãŸ 2 ã¤ã®å€¤ãŒç­‰ã—ã„ã“ã¨ã‚’æ¤œè¨¼ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰

\
ã“ã®ã‚ˆã†ã«ã€AAA ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã€ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã«å¯¾ã—ç°¡æ½”ã§çµ±ä¸€ã•ã‚ŒãŸæ§‹é€ ã‚’æŒãŸã›ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
ã€Œçµ±ä¸€æ€§ãŒã‚ã‚‹ã€ã“ã¨ã¯ã€Œå¯èª­æ€§ãŒé«˜ã¾ã‚‹ã€ã“ã¨ã«ç¹‹ãŒã‚‹ãŸã‚ã€æ§‹é€ ã‚’ç†è§£ã—å®Ÿè·µã™ã‚‹ã“ã¨ã¯ã€ãƒ†ã‚¹ãƒˆå®Ÿè£…è€…ã ã‘ã§ãªããƒãƒ¼ãƒ å…¨ä½“ã«ã‚‚åˆ©ç›Šã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚

## ã€ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ã€‘åŒã˜ãƒ•ã‚§ãƒ¼ã‚ºã‚’è¤‡æ•°ç”¨æ„ã™ã‚‹

1 ã¤ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã«åŒã˜ãƒ•ã‚§ãƒ¼ã‚ºãŒè¤‡æ•°å­˜åœ¨ã™ã‚‹ã¯ã€å˜ä½“ãƒ†ã‚¹ãƒˆã¨ã—ã¦æœ›ã¾ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚
![](https://storage.googleapis.com/zenn-user-upload/a64b95da5632-20250209.png =250x)

### ğŸ¤” ãªãœã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ãªã®ã‹ï¼Ÿ

**è¤‡æ•°ã®ã€ŒæŒ¯ã‚‹èˆã„ã€ã‚’æ¤œè¨¼ã—ã¦ã„ã‚‹**ã‹ã‚‰ã§ã™ã€‚

ä¸Šè¨˜ã¯ã€Œå®Ÿè¡Œï¼ˆActï¼‰ã€ã¨ã€Œç¢ºèªï¼ˆAssertï¼‰ã€ã‚’ 2 å›è¡Œã£ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã¯ã€å˜ä½“ãƒ†ã‚¹ãƒˆã®å®šç¾©ã§ã‚ã‚‹ã€Œ**1 å˜ä½ã®æŒ¯ã‚‹èˆã„ã‚’æ¤œè¨¼ã™ã‚‹ã“ã¨**ã€ã«åã—ã¦ã„ã¾ã™ã€‚

ã“ã®ã‚ˆã†ãªæ¤œè¨¼ã¯ã€Œçµåˆãƒ†ã‚¹ãƒˆã€ã¨ã—ã¦å®Ÿæ–½ã™ã¹ãã§ã™ã€‚

### ğŸ¤” ã©ã†ã—ã¦ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¸ã‚“ã§ã—ã¾ã†ã®ã‹ï¼Ÿ

ã€ŒåŠ¹ç‡ã‚’é‡è¦–ã—ã¦ã—ã¾ã†ã€ã‚±ãƒ¼ã‚¹ãŒå¤šã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ

- ã€Œä¼¼ãŸã‚ˆã†ãªãƒ†ã‚¹ãƒˆã‚’æ›¸ããªã‚‰ã€1 ã¤ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã«ã¾ã¨ã‚ãŸæ–¹ãŒåŠ¹ç‡çš„ã§ã¯ï¼Ÿã€ã¨è€ƒãˆã¦ã—ã¾ã†
- ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®é‡ã‚’æ¸›ã‚‰ã—ãŸã„ã€‚DRY ã‚’æ„è­˜ã—ã™ãã‚‹ã‚ã¾ã‚Šã€è¤‡æ•°ã®æ¤œè¨¼ã‚’ 1 ã¤ã®ãƒ†ã‚¹ãƒˆã«è©°ã‚è¾¼ã‚“ã§ã—ã¾ã†
- ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®å®Ÿè¡ŒçµæœãŒã€æ¬¡ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®äº‹å‰æ¡ä»¶ã¨ã—ã¦ä½¿ãˆã‚‹ã“ã¨ã«æ°—ã¥ã„ã¦ã—ã¾ã†

\
æ¬¡ã®ä¾‹ã§ã¯ã€ä»¥ä¸‹ 2 ã¤ã®ã€ŒæŒ¯ã‚‹èˆã„ã€ã®æ¤œè¨¼ã‚’åŒã˜ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã«è©°ã‚è¾¼ã‚“ã§ã„ã¾ã™ã€‚

- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®ç™»éŒ²
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾—

```java
@Test
public void é–“é•ã£ãŸä¾‹_çŠ¶æ…‹å…±æœ‰ã«ã‚ˆã‚‹åŠ¹ç‡åŒ–() {
    // Arrange
    User user = new User("test@example.com");
    UserService service = new UserService();

    // Actâ‘ 
    service.register(user);
    // Assertâ‘ 
    assertTrue(service.exists(user.getId()));

    // Actâ‘¡ ï¼ˆå‰ã®Actã®çµæœã‚’ä½¿ã£ã¦æ¤œè¨¼ï¼‰
    User found = service.findById(user.getId());
    // Assertâ‘¡
    assertEquals("test@example.com", found.getEmail());
}
```

\
ä¸€è¦‹ã€åŠ¹ç‡çš„ã«æ€ãˆã¾ã™ãŒã€ã“ã®ã‚ˆã†ãªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¯ã€Œçµåˆãƒ†ã‚¹ãƒˆã€ã«ãªã‚Šã¾ã™ã€‚
å˜ä½“ãƒ†ã‚¹ãƒˆã¨ã—ã¦æ¤œè¨¼ã—ãŸã„å ´åˆã€æŒ¯ã‚‹èˆã„ã‚’åˆ†å‰²ã—ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å¢—ã‚„ã—ã¾ã—ã‚‡ã†ã€‚

```java
@Test
public void ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãŒæˆåŠŸã™ã‚‹ã“ã¨() {
    // Arrange
    User user = new User("test@example.com");
    UserService service = new UserService();

    // Act
    service.register(user);

    // Assert
    assertTrue(service.exists(user.getId()));
}

@Test
public void ç™»éŒ²ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ­£ã—ãæ¤œç´¢ã§ãã‚‹ã“ã¨() {
    // Arrange
    User user = new User("test@example.com");
    UserService service = new UserService();
    service.register(user);  // ãƒ†ã‚¹ãƒˆã®å‰ææ¡ä»¶ã¨ã—ã¦æ˜ç¤ºçš„ã«å®Ÿè¡Œ

    // Act
    User found = service.findById(user.getId());

    // Assert
    assertEquals("test@example.com", found.getEmail());
}
```

## ã€ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ã€‘if æ–‡ã®ä½¿ç”¨

ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰å†…ã§ if æ–‡ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ã€å˜ä½“ãƒ†ã‚¹ãƒˆã®ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚
ã“ã‚Œã¯å˜ä½“ãƒ†ã‚¹ãƒˆã«é™ã‚‰ãšã€çµ±åˆãƒ†ã‚¹ãƒˆã«ãŠã„ã¦ã‚‚è©²å½“ã—ã¾ã™ã€‚

### ğŸ¤” ãªãœã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ãªã®ã‹ï¼Ÿ

**ãƒ†ã‚¹ãƒˆã®æ„å›³ãŒæ›–æ˜§ã«ãªã‚‹**ã‹ã‚‰ã§ã™ã€‚
å¯¾è±¡ã¨ãªã‚‹ã€ŒæŒ¯ã‚‹èˆã„ã€ãŒæ¡ä»¶ã«ã‚ˆã£ã¦å¤‰åŒ–ã—ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒä½•ã‚’æ¤œè¨¼ã—ãŸã„ã®ã‹ãŒåˆ†ã‹ã‚Šã¥ã‚‰ããªã‚Šã¾ã™ã€‚

ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¯ã€æ¤œè¨¼ã—ãŸã„ã€ŒæŒ¯ã‚‹èˆã„ã€ãŒä¸æ˜ç¢ºã«ãªã£ã¦ã„ã¾ã™ã€‚

```java
@Test
public void ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã®ãƒ†ã‚¹ãƒˆ() {
    // Arrange
    UserRegisterRequest request = new UserRegisterRequest("test@example.com", "password123");
    UserService userService = new UserService();

    // Act & Assert ãŒæ¡ä»¶åˆ†å²ã®ä¸­ã«...
    if (!userService.exists(request.getEmail())) {
        // Act
        User registered = userService.register(request);

        // Assert
        assertNotNull(registered.getId());
        assertEquals(request.getEmail(), registered.getEmail());
    } else {
        // åˆ¥ã®Act & Assert
        assertThrows(DuplicateEmailException.class,
            () -> userService.register(request));
    }
}
```

- æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™»éŒ²æˆåŠŸã‚’æ¤œè¨¼ã—ãŸã„ã®ã‹ï¼Ÿ
- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹é‡è¤‡æ™‚ã®ã‚¨ãƒ©ãƒ¼ã‚’æ¤œè¨¼ã—ãŸã„ã®ã‹ï¼Ÿ

## AAA ã«ãŠã‘ã‚‹å„ãƒ•ã‚§ãƒ¼ã‚ºã®é©åˆ‡ãªã‚µã‚¤ã‚ºã¯ï¼Ÿ

### æº–å‚™ï¼ˆArramgeï¼‰ãŒæœ€ã‚‚å¤§ãããªã‚Šã‚„ã™ã„

æº–å‚™ãƒ•ã‚§ãƒ¼ã‚ºã¯ã€ãƒ†ã‚¹ãƒˆã«å¿…è¦ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„çŠ¶æ…‹ã‚’æ•´ãˆã‚‹ãŸã‚ã€å¿…ç„¶çš„ã«å¤§ãããªã‚ŠãŒã¡ã§ã™ã€‚ã“ã‚Œã¯å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

```java
@Test
public void ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ­£ã—ãç™»éŒ²ã§ãã‚‹() {
    // Arrange - å¿…è¦ãªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¯å…¨ã¦è¡Œã†
    String email = "test@example.com";
    String password = "password123";
    String firstName = "Taro";
    String lastName = "Yamada";
    int age = 25;
    Address address = new Address("Tokyo", "Shibuya", "1-1-1");

    UserCreateRequest request = new UserCreateRequest(
        email, password, firstName, lastName, age, address
    );
    UserService userService = new UserService();
}
```

ãŸã ã€å¤§ãã™ãã‚‹ã¨ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®å¯èª­æ€§ãŒä¸‹ãŒã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚
ãã‚“ãªæ™‚ã¯ã€ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã®åˆ¥ãƒ¡ã‚½ãƒƒãƒ‰ã«åˆ‡ã‚Šå‡ºã™ã¨è‰¯ã„ã§ã™ã€‚

```java
@Test
public void ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ­£ã—ãç™»éŒ²ã§ãã‚‹() {
    // Arrange
    UserCreateRequest request = createDefaultUserRequest();
    UserService userService = createUserService();

    // Act & Assertï¼ˆçœç•¥ï¼‰
}

private UserCreateRequest createDefaultUserRequest() {
    return new UserCreateRequest(
        "test@example.com",
        "password123",
        "Taro",
        "Yamada",
        25,
        new Address("Tokyo", "Shibuya", "1-1-1")
    );
}

private UserService createUserService() {
    // å¿…è¦ãªä¾å­˜é–¢ä¿‚ã‚’å«ã‚€UserServiceã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
    return new UserService(new UserRepository(), new PasswordEncoder());
}
```

åˆ‡ã‚Šå‡ºã™ã“ã¨ã§ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®å¯èª­æ€§ãŒå‘ä¸Šã™ã‚‹ã ã‘ã§ãªãã€æº–å‚™ï¼ˆArrangeï¼‰ãƒ•ã‚§ãƒ¼ã‚ºã‚’ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹é–“ã§å…±æœ‰ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

åˆ‡ã‚Šå‡ºã—æ–¹ã®æ‰‹æ³•ã¯ä»–ã«ã‚‚æ§˜ã€…å­˜åœ¨ã—ã¾ã™ãŒã€ãƒ¡ã‚¸ãƒ£ãƒ¼ãªã‚‚ã®ã ã¨ä»¥ä¸‹ã® 2 ã¤ãŒã‚ã‚Šã¾ã™ã€‚

:::details ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ»ãƒã‚¶ãƒ¼ï¼ˆObject Motherï¼‰

- ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ã€Œæ¯ä½“ã€ã¨ãªã‚‹ã‚¯ãƒ©ã‚¹ã‚’ç”¨æ„ã™ã‚‹æ–¹æ³•
- ã‚ˆãä½¿ã†ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä¸€ç®‡æ‰€ã§ç®¡ç†ã§ãã‚‹
- ãƒ¡ã‚½ãƒƒãƒ‰åã§ç”¨é€”ãŒåˆ†ã‹ã‚Šã‚„ã™ã„

```java
public class UserTestMother {
    // æ¨™æº–çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ
    public static UserCreateRequest createDefault() {
        return new UserCreateRequest(
            "test@example.com",
            "password123",
            "Taro",
            "Yamada",
            25,
            new Address("Tokyo", "Shibuya", "1-1-1")
        );
    }

    // æœªæˆå¹´ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ
    public static UserCreateRequest createMinor() {
        return new UserCreateRequest(
            "minor@example.com",
            "password123",
            "Taro",
            "Yamada",
            15,  // å¹´é½¢ã ã‘å¤‰æ›´
            new Address("Tokyo", "Shibuya", "1-1-1")
        );
    }
}
```

:::

:::details ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ»ãƒ“ãƒ«ãƒ€ãƒ¼ï¼ˆTest Data Builderï¼‰

- ãƒ“ãƒ«ãƒ€ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’æŸ”è»Ÿã«æ§‹ç¯‰
- å¿…è¦ãªå€¤ã ã‘ã‚’å¤‰æ›´ã§ãã‚‹
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’æŒã¤ãŸã‚ã€æ¯å›ã™ã¹ã¦ã®å€¤ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒãªã„

```java
public class UserCreateRequestBuilder {
    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’å®šç¾©
    private String email = "test@example.com";
    private String password = "password123";
    private int age = 25;

    // å¿…è¦ãªå€¤ã ã‘ã‚’å¤‰æ›´ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰
    public UserCreateRequestBuilder withEmail(String email) {
        this.email = email;
        return this;
    }

    public UserCreateRequestBuilder withAge(int age) {
        this.age = age;
        return this;
    }

    public UserCreateRequest build() {
        return new UserCreateRequest(email, password, age);
    }
}
```

:::

ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã§ã¯ã€ãã‚Œãã‚Œä»¥ä¸‹ã®ã‚ˆã†ã«ä½¿ç”¨ã—ã¾ã™ã€‚

```java
@Test
public void ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã®ãƒ†ã‚¹ãƒˆ() {
    // Object Motherãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä½¿ç”¨ä¾‹
    UserCreateRequest request1 = UserTestMother.createDefault();

    // Test Data Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä½¿ç”¨ä¾‹
    UserCreateRequest request2 = new UserCreateRequestBuilder()
        .withEmail("custom@example.com")
        .withAge(30)
        .build();
}
```

ã©ã¡ã‚‰ã‚’é¸ã¶ã‹ã¯ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æ€§è³ªã‚„ç”¨é€”ã«ã‚ˆã£ã¦æ±ºã‚ã¾ã—ã‚‡ã†ã€‚

- å®šå‹çš„ãªãƒ‡ãƒ¼ã‚¿ãŒå¤šã„ â†’ Object Mother
- ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå¤šã„ â†’ Test Data Builder

:::message
**ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£**

ã“ã®ã‚ˆã†ã«ã€Arrange ãƒ•ã‚§ãƒ¼ã‚ºã§ç”¨æ„ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„ãƒ‡ãƒ¼ã‚¿ã®ã“ã¨ã‚’ã€Œãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã€ã¨å‘¼ã³ã¾ã™ã€‚
åå‰ã®ç”±æ¥ã¯ã€Œå›ºå®šã•ã‚ŒãŸ(fixed)ã€ã¨ã„ã†æ„å‘³ã‹ã‚‰ãã¦ãŠã‚Šã€ãƒ†ã‚¹ãƒˆãŒæ¯å›åŒã˜çŠ¶æ…‹ã‹ã‚‰å§‹ã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚

ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒå«ã¾ã‚Œã¾ã™ï¼š

- ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- ä¾å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
- å¿…è¦ãªç’°å¢ƒè¨­å®š

:::

### å®Ÿè¡Œï¼ˆActï¼‰ã®ã‚³ãƒ¼ãƒ‰ãŒ 2 è¡Œä»¥ä¸Šã®å ´åˆã¯æ³¨æ„

é€šå¸¸ã€å®Ÿè¡Œï¼ˆActï¼‰ãƒ•ã‚§ãƒ¼ã‚ºã¯ 1 è¡Œã§ååˆ†ã§ã™ã€‚
2 è¡Œä»¥ä¸Šã«ãªã‚‹å ´åˆã€ãã‚Œã¯ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã®è¨­è¨ˆã«å•é¡ŒãŒã‚ã‚‹å¯èƒ½æ€§ã‚’ç¤ºå”†ã—ã¾ã™ã€‚

**ex.ï¼‰EC ã‚µã‚¤ãƒˆã®æ³¨æ–‡å‡¦ç†**
å•†å“ã‚’æ³¨æ–‡ã™ã‚‹éš›ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
ã“ã®ãƒ†ã‚¹ãƒˆã§ã¯ã€Œæ³¨æ–‡ãŒæ­£å¸¸ã«å—ã‘ä»˜ã‘ã‚‰ã‚Œã‚‹ã“ã¨ã€ã¨ã„ã†æŒ¯ã‚‹èˆã„ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚

```java
@Test
public void å•†å“ã‚’æ³¨æ–‡ã§ãã‚‹() {
    // Arrange
    Order order = new Order("ã¿ã‹ã‚“", 3);
    Shop shop = new Shop();

    // Act - æ³¨æ–‡ã¨ã„ã†1ã¤ã®æŒ¯ã‚‹èˆã„ãŒ1è¡Œã§è¡¨ç¾ã§ãã¦ã„ã‚‹
    OrderResult result = shop.placeOrder(order);

    // Assert
    assertTrue(result.isSuccessful());
    assertEquals(OrderStatus.ACCEPTED, result.getStatus());
}
```

ä¸€æ–¹ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‹ã‘ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
åŒã˜ã€Œæ³¨æ–‡ã®å—ã‘ä»˜ã‘ã€ã¨ã„ã†æŒ¯ã‚‹èˆã„ã‚’æ¤œè¨¼ã—ã¦ã„ã¾ã™ãŒã€è¤‡æ•°ã®ã‚¹ãƒ†ãƒƒãƒ—ã«åˆ†ã‹ã‚Œã¦ã„ã¾ã™ã€‚

```java
@Test
public void å•†å“ã‚’æ³¨æ–‡ã§ãã‚‹_æ‚ªã„ä¾‹() {
    // Arrange
    Order order = new Order("ã¿ã‹ã‚“", 3);
    Shop shop = new Shop();

    // Act - æ³¨æ–‡ã¨ã„ã†1ã¤ã®æŒ¯ã‚‹èˆã„ãªã®ã«ã€è¤‡æ•°ã®ã‚¹ãƒ†ãƒƒãƒ—ãŒå¿…è¦
    boolean hasStock = shop.checkStock("ã¿ã‹ã‚“", 3);  // åœ¨åº«ç¢ºèª
    int orderId = shop.createOrder(order);           // æ³¨æ–‡ä½œæˆ
    shop.updateStock("ã¿ã‹ã‚“", -3);                  // åœ¨åº«æ›´æ–°

    // Assert
    assertTrue(hasStock);
    assertTrue(orderId > 0);
}
```

#### ğŸ¤” ãªãœå•é¡Œãªã®ã‹ï¼Ÿ

2 ã¤ç›®ã®ä¾‹ã§ã¯ã€ã€Œæ³¨æ–‡ã‚’å—ã‘ä»˜ã‘ã‚‹ã€ã¨ã„ã† 1 å˜ä½ã®æŒ¯ã‚‹èˆã„ã‚’æ¤œè¨¼ã—ã¦ã„ã‚‹ã“ã¨ã«å¤‰ã‚ã‚Šã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
ãã®ãŸã‚ã€ãƒ†ã‚¹ãƒˆè‡ªä½“ãŒæ‚ªã„ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

å•é¡Œãªã®ã¯ã€**ãƒ†ã‚¹ãƒˆã‚’æ›¸ãäººãŒå®Ÿè£…ã®è©³ç´°ã‚’çŸ¥ã‚‰ãªã„ã¨ãƒ†ã‚¹ãƒˆãŒã§ããªã„çŠ¶æ…‹ã§ã™**ã€‚

1. åœ¨åº«ç¢ºèªãŒå¿…è¦ãªã“ã¨ã‚’çŸ¥ã£ã¦ã„ãªã„ã¨ã„ã‘ãªã„
2. æ³¨æ–‡ä½œæˆã®æ–¹æ³•ã‚’çŸ¥ã£ã¦ã„ãªã„ã¨ã„ã‘ãªã„
3. åœ¨åº«ã®æ›´æ–°æ–¹æ³•ã‚’çŸ¥ã£ã¦ã„ãªã„ã¨ã„ã‘ãªã„

ã“ã‚Œã¯ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã®è¨­è¨ˆã‚’è¦‹ç›´ã™ã¹ãã¨ã„ã†è­¦å‘Šã‚µã‚¤ãƒ³ã¨ãªã‚Šã¾ã™ã€‚

#### ğŸš€ æ”¹å–„ã®æ–¹å‘æ€§

ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ”¹å–„ã§ãã¾ã™ã€‚

```java
public class Shop {
    public OrderResult placeOrder(Order order) {
        // åœ¨åº«ç¢ºèªã€æ³¨æ–‡ä½œæˆã€åœ¨åº«æ›´æ–°ã‚’ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§ã‚«ãƒ—ã‚»ãƒ«åŒ–
        if (!hasEnoughStock(order)) {
            return OrderResult.failed("åœ¨åº«ä¸è¶³");
        }

        int orderId = createNewOrder(order);
        updateStock(order);

        return OrderResult.successful(orderId);
    }

    private boolean hasEnoughStock(Order order) { /* ... */ }
    private int createNewOrder(Order order) { /* ... */ }
    private void updateStock(Order order) { /* ... */ }
}
```

ã“ã®ã‚ˆã†ã«ã€é–¢é€£ã™ã‚‹å‡¦ç†ã‚’ 1 ã¤ã®ãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚«ãƒ—ã‚»ãƒ«åŒ–ã™ã‚‹ã“ã¨ã§ã€

- ãƒ†ã‚¹ãƒˆã‚’æ›¸ãäººã¯ã€Œæ³¨æ–‡ã™ã‚‹ã€ã¨ã„ã†æŒ¯ã‚‹èˆã„ã ã‘ã‚’ç†è§£ã—ã¦ã„ã‚Œã°è‰¯ã„
- å®Ÿè£…ã®è©³ç´°ã«ä¾å­˜ã›ãšã«ãƒ†ã‚¹ãƒˆãŒæ›¸ã‘ã‚‹
- ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã®å†…éƒ¨å®Ÿè£…ã‚’å¤‰æ›´ã—ã¦ã‚‚ãƒ†ã‚¹ãƒˆã‚’ä¿®æ­£ã™ã‚‹å¿…è¦ãŒãªã„

:::message

ã€Œå®Ÿè¡Œï¼ˆActï¼‰ã‚’ 1 è¡Œã«ã™ã‚‹ã€ã¨ã„ã†åŸå‰‡ã¯ã€ã‚ãã¾ã§ã‚‚ç›®å®‰ã§ã™ã€‚
ç‰¹ã«ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ‰±ã†ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ã“ã®åŸå‰‡ã«å¾“ã†ã“ã¨ã§è¨­è¨ˆã®å•é¡Œç‚¹ã‚’ç™ºè¦‹ã§ãã¾ã™ã€‚
\
ãŸã ã—ã€ã“ã‚Œã¯çµ¶å¯¾çš„ãªãƒ«ãƒ¼ãƒ«ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

æ¬¡ã‚ˆã†ãªå ´åˆã€ä¸€æ™‚çš„ã«è¤‡æ•°è¡Œã® Act ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã¯è¨±å®¹ã•ã‚Œã¾ã™ã€‚

- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¯ãƒ©ã‚¹ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹
- ã‚¤ãƒ³ãƒ•ãƒ©ã«é–¢ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹
- æ®µéšçš„ãªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®éç¨‹ã§ã€æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹

:::

### ç¢ºèªï¼ˆAssertï¼‰ã®ã‚µã‚¤ã‚º

ã€Œãƒ†ã‚¹ãƒˆã§ã¯ç¢ºèªï¼ˆAssertï¼‰ã‚’ 1 ã¤ã ã‘ã«ã™ã¹ãã€ã¨ã„ã†æ„è¦‹ã‚’èãã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
ã—ã‹ã—ã€ã“ã‚Œã¯èª¤è§£ã§ã™ã€‚
å¤§åˆ‡ãªã®ã¯ã€Œ1 å˜ä½ã®æŒ¯ã‚‹èˆã„ã€ã‚’æ¤œè¨¼ã™ã‚‹ã“ã¨ã§ã‚ã‚Šã€ãã®æŒ¯ã‚‹èˆã„ã‹ã‚‰è¤‡æ•°ã®çµæœãŒç”Ÿã˜ã‚‹ã®ã§ã‚ã‚Œã°ã€ãã‚Œã‚‰å…¨ã¦ã‚’ç¢ºèªã™ã‚‹ã®ã¯è‡ªç„¶ãªã“ã¨ã§ã™ã€‚

#### ex.ï¼‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ©Ÿèƒ½

ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã¨ã„ã† 1 ã¤ã®æŒ¯ã‚‹èˆã„ã‚’æ¤œè¨¼ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
ã“ã®æŒ¯ã‚‹èˆã„ã‹ã‚‰ã¯è¤‡æ•°ã®çµæœãŒç”Ÿã˜ã¾ã™ã€‚

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ­£ã—ãä½œæˆã•ã‚ŒãŸã‹
- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹
- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹
- ç¢ºèªãƒ¡ãƒ¼ãƒ«ãŒé€ä¿¡ã•ã‚ŒãŸã‹

```java
@Test
public void æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ­£ã—ãç™»éŒ²ã§ãã‚‹() {
    // Arrange
    UserRegistrationRequest request = new UserRegistrationRequest(
        "test@example.com",
        "password123",
        "Taro Yamada"
    );
    UserService userService = new UserService();

    // Act
    User registered = userService.register(request);

    // Assert - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã¨ã„ã†1ã¤ã®æŒ¯ã‚‹èˆã„ã«å¯¾ã™ã‚‹è¤‡æ•°ã®æ¤œè¨¼
    assertNotNull(registered.getId());  // IDãŒç™ºè¡Œã•ã‚Œã¦ã„ã‚‹
    assertEquals(request.getEmail(), registered.getEmail());  // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹
    assertTrue(registered.isActive());  // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹
    assertFalse(registered.isVerified());  // ãƒ¡ãƒ¼ãƒ«æœªèªè¨¼çŠ¶æ…‹ã«ãªã£ã¦ã„ã‚‹
}
```

ã“ã‚Œã‚‰ã®ç¢ºèªã¯å…¨ã¦ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã€ã¨ã„ã† 1 ã¤ã®æŒ¯ã‚‹èˆã„ã‹ã‚‰ç”Ÿã˜ã‚‹çµæœã§ã™ã€‚
ãã®ãŸã‚ã€è¤‡æ•°ã® Assert ãŒå­˜åœ¨ã—ã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

:::message

ãŸã ã—ã€Assert ã®ã‚µã‚¤ã‚ºãŒå¤§ãã™ãã‚‹å ´åˆã€æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚

```java
@Test
public void ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’æ¤œè¨¼ã™ã‚‹_å†—é•·ãªä¾‹() {
    // Arrange
    UserRegistrationRequest request = new UserRegistrationRequest(
        "test@example.com", "password123", "Taro Yamada"
    );
    UserService userService = new UserService();

    // Act
    User actual = userService.register(request);

    // Assert - å…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å€‹åˆ¥ã«æ¤œè¨¼ã—ã¦ã„ã‚‹
    assertEquals(request.getEmail(), actual.getEmail());
    assertEquals(request.getName(), actual.getName());
    assertEquals(UserStatus.ACTIVE, actual.getStatus());
    assertFalse(actual.isVerified());
    assertEquals(AccountType.STANDARD, actual.getAccountType());
    assertEquals(0, actual.getLoginCount());
    assertNull(actual.getLastLoginAt());
    assertEquals(Collections.emptyList(), actual.getRoles());
    // etc...
}
```

\
ã“ã®ã‚ˆã†ãªå†—é•·ãªæ¤œè¨¼ãŒå¿…è¦ã«ãªã‚‹ã®ã¯ã€å¤šãã®å ´åˆãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã®æŠ½è±¡åŒ–ãŒé©åˆ‡ã§ãªã„ã“ã¨ã‚’ç¤ºå”†ã—ã¦ã„ã¾ã™ã€‚

1. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è²¬å‹™ãŒå¤§ãã™ãã‚‹
2. é©åˆ‡ãªé›†ç´„ãŒè¡Œã‚ã‚Œã¦ã„ãªã„

\
å€‹åˆ¥ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ¤œè¨¼ã™ã‚‹ã®ã§ã¯ãªãã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®åŒå€¤æ€§ã‚’é©åˆ‡ã«å®šç¾©ã™ã‚‹ã“ã¨ã§ã€ãƒ†ã‚¹ãƒˆã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ã§ãã¾ã™ã€‚

```java
@Test
public void ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’æ¤œè¨¼ã™ã‚‹_æ”¹å–„ä¾‹() {
    // Arrange
    UserRegistrationRequest request = new UserRegistrationRequest(
        "test@example.com", "password123", "Taro Yamada"
    );
    UserService userService = new UserService();

    // Act
    User actual = userService.register(request);

    // Assert - æœŸå¾…ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨å®Ÿéš›ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¯”è¼ƒ
    User expected = new User(
        request.getEmail(),
        request.getName(),
        UserStatus.ACTIVE,
        AccountType.STANDARD
    );
    assertEquals(expected, actual);
}
```

:::

\
ã“ã®ã‚ˆã†ã«ã€Assert ã®æ•°ã¯ã€Œ1 å˜ä½ã®æŒ¯ã‚‹èˆã„ã€ã‹ã‚‰ç”Ÿã˜ã‚‹çµæœã®æ•°ã«å¿œã˜ã¦è‡ªç„¶ã«æ±ºã¾ã‚Šã¾ã™ã€‚
ã‚‚ã—å†—é•·ãªæ¤œè¨¼ãŒå¿…è¦ã«ãªã‚‹å ´åˆã¯ã€ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã®è¨­è¨ˆã‚’è¦‹ç›´ã™ãã£ã‹ã‘ã¨ã—ã¦æ‰ãˆã¾ã—ã‚‡ã†ã€‚

## ãƒ†ã‚¹ãƒˆå¾Œã®å¾Œå§‹æœ«ï¼ˆç¬¬ï¼”ã®ãƒ•ã‚§ãƒ¼ã‚ºï¼‰

AAA ãƒ‘ã‚¿ãƒ¼ãƒ³ã§èª¬æ˜ã—ãŸ 3 ã¤ã®ãƒ•ã‚§ãƒ¼ã‚ºã®ä»–ã«ã€**å¾Œå§‹æœ«ï¼ˆCleanupï¼‰** ãŒå¿…è¦ã«ãªã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¾Œã«ã€ä½¿ç”¨ã—ãŸãƒªã‚½ãƒ¼ã‚¹ã‚’é©åˆ‡ã«è§£æ”¾ã™ã‚‹ãŸã‚ã®ãƒ•ã‚§ãƒ¼ã‚ºã§ã™ã€‚

ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªå ´åˆã§ã™ã€‚

```java
@Test
public void ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¿ãŒã§ãã‚‹() {
    // Arrange
    File tempFile = new File("temp.txt");
    FileWriter writer = new FileWriter(tempFile);

    // Act
    writer.write("test data");
    writer.close();

    // Assert
    assertTrue(tempFile.exists());
    assertEquals("test data", Files.readString(tempFile.toPath()));

    // Cleanup - ãƒ†ã‚¹ãƒˆå¾Œã«ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤
    tempFile.delete();
}
```

ã“ã®ã‚ˆã†ãªå¾Œå§‹æœ«å‡¦ç†ã¯ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã”ã¨ã«è¨˜è¿°ã™ã‚‹ã®ã§ã¯ãªãã€ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®æ©Ÿèƒ½ã‚’ä½¿ã£ã¦å…±é€šåŒ–ã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã™ã€‚

```java
public class FileWriterTest {
    private File tempFile;

    @BeforeEach
    void setUp() {
        tempFile = new File("temp.txt");
    }

    @AfterEach
    void cleanup() {
        if (tempFile.exists()) {
            tempFile.delete();
        }
    }

    @Test
    public void ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¿ãŒã§ãã‚‹() {
        // Arrange
        FileWriter writer = new FileWriter(tempFile);

        // Act
        writer.write("test data");
        writer.close();

        // Assert
        assertTrue(tempFile.exists());
        assertEquals("test data", Files.readString(tempFile.toPath()));
    }
}
```

### å˜ä½“ãƒ†ã‚¹ãƒˆã«ãŠã„ã¦ã€Œå¾Œå§‹æœ«ã€ã¯ç¨€ãªã‚±ãƒ¼ã‚¹

ã—ã‹ã—ã€å˜ä½“ãƒ†ã‚¹ãƒˆã«ãŠã„ã¦å¾Œå§‹æœ«ãŒå¿…è¦ã«ãªã‚‹ã‚±ãƒ¼ã‚¹ã¯ç¨€ã§ã™ã€‚
ãªãœãªã‚‰ã€**ã€Œå¾Œå§‹æœ«ã€ã¯å¤§æŠµãƒ—ãƒ­ã‚»ã‚¹å¤–ä¾å­˜ã«ãªã‚Šã€ãã®ã»ã¨ã‚“ã©ã¯å…±æœ‰ä¾å­˜ã¨ãªã‚‹ãŸã‚**ã§ã™ã€‚

å¾Œå§‹æœ«ãŒå¿…è¦ã«ãªã‚‹ã‚±ãƒ¼ã‚¹ã¯ã€ä¸»ã«çµåˆãƒ†ã‚¹ãƒˆã‚„ E2E ãƒ†ã‚¹ãƒˆãªã©ã€å®Ÿéš›ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ãƒ†ã‚¹ãƒˆã§ç™ºç”Ÿã—ã¾ã™ã€‚

## ãƒªãƒ¼ãƒ€ãƒ–ãƒ«ãªãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ããŸã‚ã® Tips

### ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ä¾å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åŒºåˆ¥ã—ã‚„ã™ãã™ã‚‹

ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã«ã€ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚·ã‚¹ãƒ†ãƒ ã¨ä¾å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ˜ç¢ºã«åŒºåˆ¥ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚

ä¸€èˆ¬çš„ãªæ–¹æ³•ã¨ã—ã¦ã€ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç¤ºã™å¤‰æ•°åã«ã¯ `sut` ã¨ã„ã†åå‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```java
@Test
public void Sum_of_two_numbers() {
    // Arrange
    double first = 10;
    double second = 20;
    Calculator sut = new Calculator();  // ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚·ã‚¹ãƒ†ãƒ ã‚’ç¤ºã™å‘½å

    // Act
    double result = sut.sum(first, second);

    // Assert
    assertEquals(30, result);
}
```

### AAA ã®å„ãƒ•ã‚§ãƒ¼ã‚ºã‚’åŒºåˆ¥ã—ã‚„ã™ãã™ã‚‹

ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®æ§‹é€ ã‚’ç†è§£ã—ã‚„ã™ãã™ã‚‹ãŸã‚ã«ã€AAA ã®å„ãƒ•ã‚§ãƒ¼ã‚ºã‚’è¦–è¦šçš„ã«åŒºåˆ¥ã™ã‚‹ã“ã¨ã‚‚é‡è¦ã§ã™ã€‚

ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®æ–¹æ³•ã‚’æ¡ç”¨ã—ã¾ã—ã‚‡ã†ã€‚

1. **ã‚³ãƒ¡ãƒ³ãƒˆã¨ç©ºè¡Œã§åŒºåˆ‡ã‚‹**

   ```java
   @Test
   public void Sum_of_two_numbers() {
       // Arrange
       double first = 10;
       double second = 20;
       Calculator sut = new Calculator();

       // Act
       double result = sut.sum(first, second);

       // Assert
       assertEquals(30, result);
   }
   ```

2. **ç©ºè¡Œã®ã¿ã§åŒºåˆ‡ã‚‹ï¼ˆã‚³ãƒ¼ãƒ‰ãŒååˆ†ã‚·ãƒ³ãƒ—ãƒ«ãªå ´åˆï¼‰**

   ```java
   @Test
   public void Sum_of_two_numbers() {
       double first = 10;
       double second = 20;
       Calculator sut = new Calculator();

       double result = sut.sum(first, second);

       assertEquals(30, result);
   }
   ```

   :::message
   **å¿…è¦ä»¥ä¸Šã«ç©ºè¡Œã‚’å…¥ã‚Œã™ããªã„ã‚ˆã†ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚**
   ä¾‹ãˆã°ã€Arrange ãƒ•ã‚§ãƒ¼ã‚ºå†…ã§è¤‡æ•°ã®è¨­å®šã‚’è¡Œã†å ´åˆã€ãã‚Œã‚‰ã®é–“ã«ã¯ç©ºè¡Œã‚’å…¥ã‚Œã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
   :::

é‡è¦ãªã®ã¯ã€å„ãƒ•ã‚§ãƒ¼ã‚ºã®åŒºåˆ‡ã‚ŠãŒä¸€ç›®ã§åˆ†ã‹ã‚‹ã“ã¨ã§ã™ã€‚
ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ã‚µã‚¤ã‚ºãŒå¤§ãããªã£ãŸå ´åˆã§ã‚‚ã€ã‚³ãƒ¼ãƒ‰ã®æ§‹é€ ãŒç†è§£ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚

## ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã®å…±æœ‰

è¤‡æ•°ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§åŒã˜ã‚ˆã†ãªãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚’å¿…è¦ã¨ã™ã‚‹å ´åˆã€ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ã‚’é¿ã‘ã‚‹ãŸã‚ã«ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚’å…±æœ‰ã—ãŸããªã‚‹ã®ã¯è‡ªç„¶ãªã“ã¨ã§ã™ã€‚
ã—ã‹ã—ã€ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã®å…±æœ‰æ–¹æ³•ã«ã‚ˆã£ã¦ã¯ãƒ†ã‚¹ãƒˆã®è³ªãŒæãªã‚ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚

### ã€ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ã€‘ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚„ beforeEach ã§ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚’é…ç½®ã™ã‚‹

:::details JUnitï¼ˆJavaï¼‰ã§ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ä½¿ç”¨ä¾‹

```java
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

public class CustomerTests
{
    // å…±é€šã—ã¦ä½¿ã‚ã‚Œã‚‹ãƒ†ã‚¹ãƒˆãƒ»ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£
    private final Store _store;
    private final Customer _sut;

    // ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚’åˆæœŸåŒ–ï¼ˆå„ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã«å‘¼ã³å‡ºã•ã‚Œã‚‹ï¼‰
    public CustomerTests()
    {
        _store = new Store();
        _store.addInventory(Product.SHAMPOO, 10);
        _sut = new Customer();
    }

    // åœ¨åº«ãŒååˆ†ã«ã‚ã‚‹å ´åˆã€è³¼å…¥ã¯æˆåŠŸã™ã‚‹
    @Test
    public void purchase_succeeds_when_enough_inventory()
    {
        // Act
        boolean success = _sut.purchase(_store, Product.SHAMPOO, 5);

        // Assert
        assertTrue(success);
        assertEquals(5, _store.getInventory(Product.SHAMPOO));
    }

    // åœ¨åº«ãŒååˆ†ã«ãªã„å ´åˆã€è³¼å…¥ã¯å¤±æ•—ã™ã‚‹
    @Test
    public void purchase_fails_when_not_enough_inventory()
    {
        // Act
        boolean success = _sut.purchase(_store, Product.SHAMPOO, 15);

        // Assert
        assertFalse(success);
        assertEquals(10, _store.getInventory(Product.SHAMPOO));
    }
}
```

:::

:::details Vitestï¼ˆTypeScriptï¼‰ã§ã® beforeEach ä½¿ç”¨ä¾‹

```ts
import { beforeEach, test, expect } from "vitest";

describe("Customer", () => {
  // å…±é€šã—ã¦ä½¿ã‚ã‚Œã‚‹ãƒ†ã‚¹ãƒˆãƒ»ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£
  let store: Store;
  let sut: Customer;

  // beforeEachã§ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚’åˆæœŸåŒ–ï¼ˆå„ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã«å‘¼ã³å‡ºã•ã‚Œã‚‹ï¼‰
  beforeEach(() => {
    store = new Store();
    store.addInventory(Product.SHAMPOO, 10);
    sut = new Customer();
  });

  // åœ¨åº«ãŒååˆ†ã«ã‚ã‚‹å ´åˆã€è³¼å…¥ã¯æˆåŠŸã™ã‚‹
  test("purchase succeeds when enough inventory", () => {
    // Act
    const success = sut.purchase(store, Product.SHAMPOO, 5);

    // Assert
    expect(success).toBe(true);
    expect(store.getInventory(Product.SHAMPOO)).toBe(5);
  });

  // åœ¨åº«ãŒååˆ†ã«ãªã„å ´åˆã€è³¼å…¥ã¯å¤±æ•—ã™ã‚‹
  test("purchase fails when not enough inventory", () => {
    // Act
    const success = sut.purchase(store, Product.SHAMPOO, 15);

    // Assert
    expect(success).toBe(false);
    expect(store.getInventory(Product.SHAMPOO)).toBe(10);
  });
});
```

:::

ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚„ `beforeEach` ã«é…ç½®ã™ã‚‹ã“ã¨ã§ã€2 ã¤ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¯ Arrange ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å…±é€šåŒ–ã—ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€å„ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§ã¯ Arrange ãƒ•ã‚§ãƒ¼ã‚ºã®ã‚³ãƒ¼ãƒ‰ã‚’çœç•¥ã§ãã¾ã™ã€‚

ã—ã‹ã—ã€ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã¯é‡å¤§ãªæ¬ ç‚¹ãŒ 2 ã¤ã‚ã‚Šã¾ã™ã€‚

#### â‘  ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹é–“ã®çµåˆåº¦ãŒé«˜ããªã‚‹

ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹é–“ã«å¼·ã„çµåˆãŒç”Ÿã¾ã‚Œã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ã‚ã‚‹ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ãŸã‚ã«è¨­å®šã‚’å¤‰æ›´ã™ã‚‹ã¨ã€ä»–ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã«ã‚‚å½±éŸ¿ã—ã¾ã™ã€‚

ex.ï¼‰åˆæœŸåœ¨åº«æ•°ã‚’ 10 â†’ 15 ã«å¤‰æ›´ã™ã‚‹å ´åˆï¼š

```diff java
   // ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚’åˆæœŸåŒ–ï¼ˆå„ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã«å‘¼ã³å‡ºã•ã‚Œã‚‹ï¼‰
   public CustomerTests() // ã¾ãŸã¯ beforeEach(() => {
   {
     _store = new Store();
-    _store.addInventory(Product.SHAMPOO, 10);
+    _store.addInventory(Product.SHAMPOO, 15);
     _sut = new Customer();
   }
```

2 ã¤ç›®ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ï¼ˆ`purchase_fails_when_not_enough_inventory`ï¼‰ãŒæœŸå¾…é€šã‚Šã«å‹•ä½œã—ãªããªã‚Šã¾ã™ã€‚
è³¼å…¥ã—ã‚ˆã†ã¨ã™ã‚‹æ•°é‡ï¼ˆ15 å€‹ï¼‰ãŒåœ¨åº«æ•°ï¼ˆ15 å€‹ï¼‰ã¨ç­‰ã—ããªã‚Šã€ãƒ†ã‚¹ãƒˆã®å‰ææ¡ä»¶ãŒå¤‰ã‚ã£ã¦ã—ã¾ã†ãŸã‚ã§ã™ã€‚

:::message
**1 ã¤ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã«é–¢ã™ã‚‹ä¿®æ­£ãŒã€ä»–ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã«å½±éŸ¿ã‚’ã‚ãŸãˆã¦ã¯ã„ã‘ãªã„ã€‚**
:::

#### â‘¡ ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®å¯èª­æ€§ãŒä¸‹ãŒã‚‹

ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã ã‘ã‚’è¦‹ã¦ã‚‚ã€ä½•ã‚’æ¤œè¨¼ã—ãŸã„ã®ã‹ã‚’å®Œå…¨ã«ç†è§£ã™ã‚‹ã“ã¨ãŒé›£ã—ããªã‚Šã¾ã™ã€‚

åˆæœŸçŠ¶æ…‹ã®è¨­å®šãŒã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«åˆ†é›¢ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãƒ†ã‚¹ãƒˆã®å…¨ä½“åƒã‚’æŠŠæ¡ã™ã‚‹ã«ã¯ã€`ãƒ¡ã‚½ãƒƒãƒ‰æœ¬ä½“` + `ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼ˆbeforeEachï¼‰` ã®ä¸¡æ–¹ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

:::message

**è‰¯ã„ãƒ†ã‚¹ãƒˆã¯è‡ªå·±å®Œçµçš„ã§ã‚ã‚Šã€ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã‚’èª­ã‚€ã ã‘ã§ãƒ†ã‚¹ãƒˆã®æ„å›³ã¨å‰ææ¡ä»¶ãŒæ˜ç¢ºã«ã‚ã‹ã‚‹ã¹ãã€‚**

:::

### é©åˆ‡ãªå…±æœ‰æ–¹æ³•

ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã« private ãªãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨æ„ã™ã‚‹æ–¹æ³•ãŒåŠ¹æœçš„ã§ã™ã€‚

```java
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

public class CustomerTests {

    // åœ¨åº«ãŒååˆ†ã«ã‚ã‚‹å ´åˆã€è³¼å…¥ã¯æˆåŠŸã™ã‚‹
    @Test
    public void purchase_succeeds_when_enough_inventory() {
        // Arrange
        Store store = createStoreWithInventory(Product.SHAMPOO, 10);
        Customer sut = createCustomer();

        // Act
        boolean success = sut.purchase(store, Product.SHAMPOO, 5);

        // Assert
        assertTrue(success);
        assertEquals(5, store.getInventory(Product.SHAMPOO));
    }

    // åœ¨åº«ãŒååˆ†ã«ãªã„å ´åˆã€è³¼å…¥ã¯å¤±æ•—ã™ã‚‹
    @Test
    public void purchase_fails_when_not_enough_inventory() {
        // Arrange
        Store store = createStoreWithInventory(Product.SHAMPOO, 10);
        Customer sut = createCustomer();

        // Act
        boolean success = sut.purchase(store, Product.SHAMPOO, 15);

        // Assert
        assertFalse(success);
        assertEquals(10, store.getInventory(Product.SHAMPOO));
    }

    // æŒ‡å®šã—ãŸåœ¨åº«ã‚’æŠ±ãˆã‚‹åº—ã‚’ä½œæˆã™ã‚‹
    private Store createStoreWithInventory(Product product, int quantity) {
        Store store = new Store();
        store.addInventory(product, quantity);
        return store;
    }

    // é¡§å®¢ã‚’ä½œæˆã™ã‚‹
    private static Customer createCustomer() {
        return new Customer();
    }
}
```

å…±é€šåŒ–ã§ãã‚‹ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚’ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦å®šç¾©ã™ã‚‹ã“ã¨ã§ã€æ¬¡ã®ã‚ˆã†ãªåˆ©ç‚¹ãŒå¾—ã‚‰ã‚Œã¾ã™ï¼š

- ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’å‰Šæ¸›ã§ãã‚‹
- ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰å´ã§ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã®å‘¼ã³å‡ºã—ã‚’åˆ¶å¾¡ã§ãã‚‹ãŸã‚ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹é–“ã®çµåˆåº¦ã‚’ä½ãã§ãã‚‹
- ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰å†…ã ã‘ã§ã€ä½•ã‚’æ¤œè¨¼ã—ã¦ã„ã‚‹ã®ã‹ã‚’æŠŠæ¡ã§ãã‚‹

\
ã•ã‚‰ã«ã€ä»¥ä¸‹ã®åˆ©ç‚¹ã‚‚äº«å—ã§ãã¾ã™ï¼š

1. **Arrange ãƒ•ã‚§ãƒ¼ã‚ºã®å¯èª­æ€§ãŒé«˜ããªã‚‹**

   ```diff java
   - // ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§Arrange
   - public CustomerTests() {
   -     _store = new Store();
   -     _store.addInventory(Product.SHAMPOO, 10);
   -     _sut = new Customer();
   - }

   + // ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦Arrange
   + Store store = createStoreWithInventory(Product.SHAMPOO, 10);
   + Customer sut = createCustomer();
   ```

   ãƒ¡ã‚½ãƒƒãƒ‰åã¨å¼•æ•°ã‚’è¦‹ã‚‹ã“ã¨ã§ã€åº—ï¼ˆ`Store`ï¼‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒã©ã®ã‚ˆã†ã«ç”Ÿæˆã•ã‚Œã‚‹ã®ã‹ã‚’ä¸€ç›®ã§ç†è§£ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

2. **ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚³ãƒ¼ãƒ‰ãŒå…±æœ‰ã—ã‚„ã™ããªã‚‹**

   ```java
   Store store = createStoreWithInventory(Product.SHAMPOO, 10);
   ```

   ã€Œâšªï¸âšªï¸ å•†å“ã®åœ¨åº«ã‚’ã€‡ã€‡å€‹æŒã£ã¦ã„ã‚‹åº—ã‚’ä½œæˆã™ã‚‹ã€ã¨ã„ã†ãƒ­ã‚¸ãƒƒã‚¯ã¯å…±é€šåŒ–ã—ã¤ã¤ã‚‚ã€ã€Œå•†å“ã®ç¨®é¡ã€ã¨ã€Œåœ¨åº«æ•°ã€ã¯ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å´ã§è‡ªç”±ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã§ãã¾ã™ã€‚
   ã“ã‚Œã«ã‚ˆã‚Šã€æŸ”è»Ÿæ€§ã‚’ä¿ã¡ãªãŒã‚‰ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ã‚’é¿ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### çµåˆãƒ†ã‚¹ãƒˆã§ã¯ä¾‹å¤–

ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚„ beforeEach ã§ã®ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£è¨­å®šã¯ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ã¨èª¬æ˜ã—ã¾ã—ãŸãŒã€ä¾‹å¤–çš„ãªã‚±ãƒ¼ã‚¹ã‚‚å­˜åœ¨ã—ã¾ã™ã€‚
ãã‚Œã¯ã€**ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§åŒä¸€ã®ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£è¨­å®šãŒå¿…è¦ãªçµåˆãƒ†ã‚¹ãƒˆ**ã®å ´åˆã§ã™ã€‚

ç‰¹ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹çµåˆãƒ†ã‚¹ãƒˆã§ã¯ã€ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹é–“ã§å…±é€šã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ­ã‚¸ãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã«åŸºåº•ã‚¯ãƒ©ã‚¹ã‚’æ´»ç”¨ã™ã‚‹æ–¹æ³•ãŒåŠ¹æœçš„ã§ã™ã€‚

```java
// åŸºåº•ã‚¯ãƒ©ã‚¹
public abstract class IntegrationTests implements IDisposable
{
    protected readonly Database _database;

    protected IntegrationTests()
    {
        _database = new Database();
    }

    public void Dispose()
    {
        _database.Dispose();
    }
}

// æ´¾ç”Ÿãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹
public class CustomerTests : IntegrationTests
{
    @Test
    public void purchase_succeeds_when_enough_inventory()
    {
        // ã“ã“ã§ã¯ã€åŸºåº•ã‚¯ãƒ©ã‚¹ã§åˆæœŸåŒ–ã•ã‚ŒãŸ _database ã‚’ä½¿ã£ã¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«é–¢ã™ã‚‹
        // å‡¦ç†ã‚’è¡Œã†
        // ...
    }
}
```

ã“ã®æ–¹æ³•ã§ã¯ã€`CustomerTests`ã‚¯ãƒ©ã‚¹ã«ã¯ç‹¬è‡ªã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒãªãã€åŸºåº•ã‚¯ãƒ©ã‚¹ã®`IntegrationTests`ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒåˆæœŸåŒ–ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Š:

1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãªã©ã®å…±é€šãƒ­ã‚¸ãƒƒã‚¯ã‚’ä¸€ç®‡æ‰€ã«ã¾ã¨ã‚ã‚‰ã‚Œã‚‹
2. ãƒªã‚½ãƒ¼ã‚¹ã®é©åˆ‡ãªè§£æ”¾ï¼ˆDisposeï¼‰ãŒä¿è¨¼ã•ã‚Œã‚‹
3. è¤‡æ•°ã®ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã§åŒã˜ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚³ãƒ¼ãƒ‰ã‚’ç¹°ã‚Šè¿”ã—æ›¸ãå¿…è¦ãŒãªã„

ãŸã ã—ã€ã“ã®ä¾‹å¤–ã¯ã€Œã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§åŒã˜åˆæœŸçŠ¶æ…‹ãŒå¿…è¦ã€ãªå ´åˆã«é™ã‚‰ã‚Œã¾ã™ã€‚
ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã«ã‚ˆã£ã¦ç•°ãªã‚‹åˆæœŸçŠ¶æ…‹ãŒå¿…è¦ãªå ´åˆã¯ã€ã‚„ã¯ã‚Šå„ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰å†…ã§æ˜ç¤ºçš„ã«è¨­å®šã™ã‚‹ã»ã†ãŒé©åˆ‡ã§ã™ã€‚

## ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®å‘½å

ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®å‘½åã¯ã€ãƒ†ã‚¹ãƒˆã®æ„å›³ã‚’æ˜ç¢ºã«ä¼ãˆã‚‹é‡è¦ãªå½¹å‰²ã‚’æ‹…ã„ã¾ã™ã€‚
é©åˆ‡ãªå‘½åã¯ã€ã‚³ãƒ¼ãƒ‰ã®èª­ã¿æ‰‹ãŒãƒ†ã‚¹ãƒˆã®ç›®çš„ã‚’ç¬æ™‚ã«ç†è§£ã™ã‚‹ã“ã¨ã‚’åŠ©ã‘ã€ãƒ†ã‚¹ãƒˆã®ä¿å®ˆæ€§ã‚’é«˜ã‚ã‚‹ã“ã¨ã«ã¤ãªãŒã‚Šã¾ã™ã€‚

### è‰¯ã„å‘½åã®åŸå‰‡

ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å‘½åã™ã‚‹éš›ã«æœ€ã‚‚é‡è¦ãªã®ã¯ã€**ã€Œã©ã®ã‚ˆã†ãªæŒ¯ã‚‹èˆã„ã‚’æ¤œè¨¼ã—ã¦ã„ã‚‹ã®ã‹ã€**ãŒä¸€ç›®ã§åˆ†ã‹ã‚‹ã“ã¨ã§ã™ã€‚
ã“ã‚Œã¯ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ã‚’é«˜ã‚ã€ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ãŸéš›ã®åŸå› ç‰¹å®šã‚’å®¹æ˜“ã«ã—ã¾ã™ã€‚

### ã€ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ã€‘æ©Ÿæ¢°çš„ãªå‘½åè¦å‰‡

æ¬¡ã®ã‚ˆã†ãªå½¢å¼çš„ãªå‘½åè¦å‰‡ã¯ã€ä¸€è¦‹æ•´ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã™ãŒã€å®Ÿéš›ã«ã¯å½¹ã«ç«‹ã¡ã¾ã›ã‚“ã€‚

```
{ãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ¡ã‚½ãƒƒãƒ‰}_{äº‹å‰æ¡ä»¶}_{æƒ³å®šã™ã‚‹çµæœ}
```

ä¾‹ãˆã°ï¼š

```java
// isDeliveryValid_withInvalidDate_returnsFalse
public void isDeliveryValid_withInvalidDate_returnsFalse()
```

#### å•é¡Œç‚¹

ã“ã®å‘½åæ–¹æ³•ã«ã¯æ¬¡ã®ã‚ˆã†ãªå•é¡ŒãŒã‚ã‚Šã¾ã™ï¼š

1. **å®Ÿè£…ã®è©³ç´°ã«ä¾å­˜ã—ã¦ã„ã‚‹**

   - ãƒ¡ã‚½ãƒƒãƒ‰åãŒå¤‰æ›´ã•ã‚Œã‚‹ã¨ã€ãƒ†ã‚¹ãƒˆåã‚‚å¤‰æ›´ãŒå¿…è¦ã«ãªã‚‹
   - å†…éƒ¨å®Ÿè£…ã®è©³ç´°ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ãŠã‚Šã€ãƒ“ã‚¸ãƒã‚¹ä¸Šã®æŒ¯ã‚‹èˆã„ãŒè¦‹ãˆã«ãã„

2. **èªçŸ¥çš„è² è·ãŒé«˜ã„**

   - ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¾“ãŠã†ã¨ã™ã‚‹ã‚ã¾ã‚Šã€åå‰ãŒé•·ãè¤‡é›‘ã«ãªã‚ŠãŒã¡
   - æœ¬è³ªçš„ãªæŒ¯ã‚‹èˆã„ã‚ˆã‚Šã‚‚ã€å½¢å¼ã«æ³¨ç›®ã—ã¦ã—ã¾ã†

3. **æ„å›³ãŒä¼ã‚ã‚Šã«ãã„**
   - éé–‹ç™ºè€…ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚„ QA æ‹…å½“è€…ãªã©ï¼‰ã«ã¯ç†è§£ã—ã¥ã‚‰ã„
   - ãƒ†ã‚¹ãƒˆãŒä½•ã‚’æ¤œè¨¼ã—ã¦ã„ã‚‹ã®ã‹ã€æœ¬è³ªãŒè¦‹ãˆã¥ã‚‰ã„

### åŠ¹æœçš„ãªå‘½åã®æŒ‡é‡

ã‚ˆã‚ŠåŠ¹æœçš„ãªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å‘½åã®æŒ‡é‡ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

1. **å³æ ¼ãªå‘½åè¦å‰‡ã«ç¸›ã‚‰ã‚Œãªã„**

   - ãƒ†ã‚¹ãƒˆã®æœ¬è³ªã‚’ä¼ãˆã‚‹ã“ã¨ã‚’æœ€å„ªå…ˆã™ã‚‹
   - è¤‡é›‘ãªæŒ¯ã‚‹èˆã„ã‚’ç„¡ç†ã«å®šå‹çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã«æŠ¼ã—è¾¼ã‚ãªã„

2. **ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªã‚’ä½¿ç”¨ã™ã‚‹**

   - æŠ€è¡“çš„ãªè¡¨ç¾ã‚ˆã‚Šã‚‚ãƒ“ã‚¸ãƒã‚¹ãƒ‰ãƒ¡ã‚¤ãƒ³ã®è¨€è‘‰ã‚’å„ªå…ˆã™ã‚‹
   - éé–‹ç™ºè€…ã«ã‚‚ä¼ã‚ã‚‹è¡¨ç¾ã‚’å¿ƒãŒã‘ã‚‹

3. **èª­ã¿ã‚„ã™ã•ã‚’é‡è¦–ã™ã‚‹**
   - ï¼ˆè‹±èªã®å ´åˆï¼‰å˜èªã®åŒºåˆ‡ã‚Šã«ã¯ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢(`_`)ã‚’ä½¿ç”¨ã™ã‚‹
   - ç°¡æ½”ã•ã¨æ˜ç¢ºã•ã®ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã‚‹

### ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®å‘½åã«ãŠã‘ã‚‹å…·ä½“ä¾‹ã®æ”¹å–„

#### ã‚¹ãƒ†ãƒƒãƒ— 0: æ©Ÿæ¢°çš„ãªå‘½åè¦å‰‡ã«ã‚ˆã‚‹ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³

ã¾ãšã€æ©Ÿæ¢°çš„ãªå‘½åè¦å‰‡ã«å¾“ã£ãŸå…¸å‹çš„ãªã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¾‹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```java
// isDeliveryValid_withInvalidDate_returnsFalse
public void isDeliveryValid_withInvalidDate_returnsFalse()
```

ã“ã®å‘½åãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¯ä»¥ä¸‹ã®å•é¡ŒãŒã‚ã‚Šã¾ã™ï¼š

- ãƒ¡ã‚½ãƒƒãƒ‰åã€æ¡ä»¶ã€æˆ»ã‚Šå€¤ã‚’æ©Ÿæ¢°çš„ã«ä¸¦ã¹ãŸã ã‘ã§ã€ãƒ†ã‚¹ãƒˆã®æœ¬è³ªçš„ãªæ„å‘³ãŒä¼ã‚ã‚Šã«ãã„
- å®Ÿè£…ã®è©³ç´°ã«ä¾å­˜ã—ã¦ã„ã‚‹ãŸã‚ã€ãƒ¡ã‚½ãƒƒãƒ‰åãŒå¤‰æ›´ã•ã‚Œã‚‹ã¨ä¿®æ­£ãŒå¿…è¦ã«ãªã‚‹
- éé–‹ç™ºè€…ã«ã¯ç†è§£ã—ã¥ã‚‰ã„è¡¨ç¾ã«ãªã£ã¦ã„ã‚‹

#### ã‚¹ãƒ†ãƒƒãƒ— 1: å…·ä½“æ€§ãŒä¸è¶³ã—ãŸå‘½åã®å•é¡Œç‚¹

```java
// ä¸æ­£ãªæ—¥ä»˜ãŒæŒ‡å®šã•ã‚ŒãŸé…é”ã¯ä¸æ­£ã ã¨è¦‹ãªã•ã‚Œã‚‹ã¹ãã§ã‚ã‚‹
public void Delivery_with_invalid_date_should_be_considered_invalid()
```

ã“ã®å‘½åã«ã¯ 2 ã¤ã®ä¸»è¦ãªå•é¡ŒãŒã‚ã‚Šã¾ã™ï¼š

1. **æ›–æ˜§ã•**: ã€Œä¸æ­£ãªæ—¥ä»˜ã€ã¨ã¯å…·ä½“çš„ã«ã©ã†ã„ã†çŠ¶æ…‹ãªã®ã‹ãŒæ˜ç¢ºã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚é–‹ç™ºè€…ãŒã“ã®ãƒ†ã‚¹ãƒˆã®ç›®çš„ã‚’ç†è§£ã™ã‚‹ã«ã¯ã€å®Ÿè£…ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

2. **ãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ¡ã‚½ãƒƒãƒ‰ã®æ¬ è½**: ãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ¡ã‚½ãƒƒãƒ‰åï¼ˆ`isDeliveryValid`ï¼‰ãŒãƒ†ã‚¹ãƒˆåã«å«ã¾ã‚Œã¦ã„ãªã„ãŸã‚ã€ä½•ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã„ã‚‹ã®ã‹æŠŠæ¡ã—ã¥ã‚‰ããªã£ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®å•é¡Œç‚¹ã¯ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ã‚’ä½ä¸‹ã•ã›ã€ä¿å®ˆãŒé›£ã—ããªã‚‹åŸå› ã¨ãªã‚Šã¾ã™ã€‚

#### ã‚¹ãƒ†ãƒƒãƒ— 2: å…·ä½“æ€§ã‚’é«˜ã‚ã‚‹æ”¹å–„

ã‚ˆã‚Šæ˜ç¢ºãªæƒ…å ±ã‚’æä¾›ã™ã‚‹ã‚ˆã†ã«æ”¹å–„ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```java
// éå»ã®æ—¥ä»˜ãŒæŒ‡å®šã•ã‚ŒãŸé…é”ã¯ä¸æ­£ã ã¨è¦‹ãªã•ã‚Œã‚‹ã¹ãã§ã‚ã‚‹
public void Delivery_with_past_date_should_be_considered_invalid()
```

ã“ã®å¤‰æ›´ã§æ˜ç¢ºã«ãªã£ãŸç‚¹ï¼š

- ã€Œä¸æ­£ãªæ—¥ä»˜ã€ãŒã€Œéå»ã®æ—¥ä»˜ã€ã¨ã„ã†å…·ä½“çš„ãªæ¡ä»¶ã«å¤‰ã‚ã‚Šã€ãƒ†ã‚¹ãƒˆã®æ„å›³ãŒæ˜ç¢ºã«ãªã‚Šã¾ã—ãŸ
- éå»ã®æ—¥ä»˜ã®é…é”ãŒä¸æ­£ã¨è¦‹ãªã•ã‚Œã‚‹ã¹ãã¨ã„ã†ä»•æ§˜ãŒä¼ã‚ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ

#### ã‚¹ãƒ†ãƒƒãƒ— 3: å†—é•·ãªè¡¨ç¾ã®å‰Šé™¤

ãƒ†ã‚¹ãƒˆåã‚’ã•ã‚‰ã«æ´—ç·´ã•ã›ã¾ã™ï¼š

```java
// éå»ã®æ—¥ä»˜ãŒæŒ‡å®šã•ã‚ŒãŸé…é”ã¯ä¸æ­£ã¨ã™ã¹ãã§ã‚ã‚‹
public void Delivery_with_past_date_should_be_invalid()
```

ã€Œconsideredï¼ˆè¦‹ãªã•ã‚Œã‚‹ï¼‰ã€ã¨ã„ã†å†—é•·ãªè¡¨ç¾ã‚’å‰Šé™¤ã—ã¦ã‚‚ã€ãƒ†ã‚¹ãƒˆã®æ„å›³ã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚ˆã‚Šç°¡æ½”ã«ãªã‚Šã¾ã—ãŸã€‚

#### ã‚¹ãƒ†ãƒƒãƒ— 4: å‘½ä»¤å½¢ã‹ã‚‰å™è¿°å½¢ã¸ã®å¤‰æ›

ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®åå‰ã¯ã€Œä½•ãŒèµ·ãã‚‹ã¹ãã‹ã€ã§ã¯ãªãã€Œä½•ãŒèµ·ãã‚‹ã‹ã€ã‚’è¡¨ç¾ã™ã¹ãã§ã™ï¼š

```java
// éå»ã®æ—¥ä»˜ãŒæŒ‡å®šã•ã‚ŒãŸé…é”ã¯ä¸æ­£ã§ã‚ã‚‹
public void Delivery_with_past_date_is_invalid()
```

ã€Œshould beï¼ˆã¹ãã§ã‚ã‚‹ï¼‰ã€ã‚’ã€Œisï¼ˆã§ã‚ã‚‹ï¼‰ã€ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã€ãƒ†ã‚¹ãƒˆã¯äº‹å®Ÿã‚’è¿°ã¹ã‚‹ã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚
å˜ä½“ãƒ†ã‚¹ãƒˆã¯ 1 ã¤ã®æŒ¯ã‚‹èˆã„ã®äº‹å®Ÿã‚’æ¤œè¨¼ã™ã‚‹ã‚‚ã®ã§ã‚ã‚Šã€æœŸå¾…ã‚„è¦æœ›ã‚’å«ã‚ã‚‹ã¹ãã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

### ã‚¹ãƒ†ãƒƒãƒ— 5: è‹±èªã®æ–‡æ³•çš„ãªæ´—ç·´

æœ€å¾Œã«ã€è‹±èªã®æ–‡æ³•ã«å¾“ã£ã¦ã‚ˆã‚Šè‡ªç„¶ãªè¡¨ç¾ã«ã—ã¾ã™ï¼š

```java
// éå»ã®æ—¥ä»˜ãŒæŒ‡å®šã•ã‚ŒãŸé…é”ã¯ä¸æ­£ã§ã‚ã‚‹
public void Delivery_with_a_past_date_is_invalid()
```

å† è©ã€Œaã€ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã€è‹±èªã¨ã—ã¦ã‚ˆã‚Šæ­£ç¢ºã«ãªã‚Šã¾ã—ãŸã€‚ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®èª­ã¿ã‚„ã™ã•ãŒå‘ä¸Šã—ã€å‘½åè¦å‰‡ã¨ã—ã¦ã®ä¸€è²«æ€§ã‚‚ä¿ãŸã‚Œã¾ã™ã€‚

#### ã¾ã¨ã‚

ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹åã¯æ®µéšçš„ã«æ”¹å–„ã•ã‚Œã€ä»¥ä¸‹ã®å¤‰åŒ–ãŒã‚ã‚Šã¾ã—ãŸï¼š

1. æ©Ÿæ¢°çš„ãªå‘½åãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰æ„å‘³ã®ã‚ã‚‹è¡¨ç¾ã¸
2. æ›–æ˜§ãªã€Œä¸æ­£ãªæ—¥ä»˜ã€ã‹ã‚‰å…·ä½“çš„ãªã€Œéå»ã®æ—¥ä»˜ã€ã¸
3. å†—é•·ãªè¡¨ç¾ã®å‰Šé™¤
4. å‘½ä»¤å½¢ï¼ˆ~ã™ã¹ãï¼‰ã‹ã‚‰å™è¿°å½¢ï¼ˆ~ã§ã‚ã‚‹ï¼‰ã¸ã®å¤‰æ›
5. æ–‡æ³•çš„ãªæ´—ç·´

ã“ã‚Œã‚‰ã®æ”¹å–„ã«ã‚ˆã‚Šã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®æ„å›³ãŒã‚ˆã‚Šæ˜ç¢ºã«ãªã‚Šã€ã‚³ãƒ¼ãƒ‰ã‚’åˆã‚ã¦èª­ã‚€äººã§ã‚‚ç†è§£ã—ã‚„ã™ããªã‚Šã¾ã—ãŸã€‚é©åˆ‡ãªå‘½åã¯ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ä¿å®ˆæ€§å‘ä¸Šã«å¤§ããè²¢çŒ®ã—ã¾ã™ã€‚

ãŠã£ã—ã‚ƒã‚‹é€šã‚Šã§ã™ã€‚é‡è¦ãªæŒ‡æ‘˜ã‚’ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ä¿®æ­£ã—ã¾ã™ã€‚

## ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãƒ†ã‚¹ãƒˆ

é€šå¸¸ã€1 ã¤ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã ã‘ã§ã¯ 1 å˜ä½ã®æŒ¯ã‚‹èˆã„ã‚’å®Œå…¨ã«è¡¨ç¾ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚
ãªãœãªã‚‰ã€1 å˜ä½ã®**æŒ¯ã‚‹èˆã„**ã«ã¯è¤‡æ•°ã®æ¤œè¨¼ã™ã¹ã**äº‹å®Ÿ**ãŒå­˜åœ¨ã™ã‚‹ã®ãŒæ™®é€šã ã‹ã‚‰ã§ã™ã€‚

ä¾‹ãˆã°ã€é…é”ã‚µãƒ¼ãƒ“ã‚¹ã«ãŠã„ã¦ã€Œæœ‰åŠ¹ãªé…é”æ—¥ä»˜ã€ã¨ã„ã†æŒ¯ã‚‹èˆã„ã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚
ã“ã®æŒ¯ã‚‹èˆã„ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªè¤‡æ•°ã®äº‹å®Ÿã§æ§‹æˆã•ã‚Œã¾ã™ï¼š

- éå»ã®æ—¥ä»˜ãŒæŒ‡å®šã•ã‚ŒãŸé…é”ã¯ä¸æ­£ã§ã‚ã‚‹
- å½“æ—¥ãŒæŒ‡å®šã•ã‚ŒãŸé…é”ã¯ä¸æ­£ã§ã‚ã‚‹
- ç¿Œæ—¥ãŒæŒ‡å®šã•ã‚ŒãŸé…é”ã¯ä¸æ­£ã§ã‚ã‚‹
- æœ€çŸ­ã®é…é”æ—¥ã¯å½“æ—¥ã‹ã‚‰ 2 æ—¥å¾Œã§ã‚ã‚‹

ã“ã‚Œã‚‰ã™ã¹ã¦ã®äº‹å®Ÿã‚’å€‹åˆ¥ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¨ã—ã¦å®Ÿè£…ã™ã‚‹ã¨ã€ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š

```java
// Java/JUnit
// éå»ã®æ—¥ä»˜ãŒæŒ‡å®šã•ã‚ŒãŸé…é”ã¯ä¸æ­£ã§ã‚ã‚‹
public void Delivery_with_a_past_date_is_invalid() {
    // ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
    // æœŸå¾…çµæœ: isValid == false
}

// å½“æ—¥ãŒæŒ‡å®šã•ã‚ŒãŸé…é”ã¯ä¸æ­£ã§ã‚ã‚‹
public void Delivery_for_today_is_invalid() {
    // ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
    // æœŸå¾…çµæœ: isValid == false
}

// ç¿Œæ—¥ãŒæŒ‡å®šã•ã‚ŒãŸé…é”ã¯ä¸æ­£ã§ã‚ã‚‹
public void Delivery_for_tomorrow_is_invalid() {
    // ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
    // æœŸå¾…çµæœ: isValid == false
}

// æœ€çŸ­ã®é…é”æ—¥ã¯å½“æ—¥ã‹ã‚‰2æ—¥å¾Œã§ã‚ã‚‹
public void The_soonest_delivery_date_is_two_days_from_now() {
    // ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
    // æœŸå¾…çµæœ: isValid == true
}
```

ã“ã‚Œã‚‰ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹é–“ã®é•ã„ã¯ã€ŒæŒ‡å®šã•ã‚ŒãŸé…é”æ—¥ã€ã¨ã€ŒæœŸå¾…ã•ã‚Œã‚‹çµæœã€ã§ã™ã€‚
ã—ã‹ã—ã€ãƒ†ã‚¹ãƒˆãƒ­ã‚¸ãƒƒã‚¯è‡ªä½“ï¼ˆé…é”æ—¥ã‚’è¨­å®šã—ã€æ¤œè¨¼ã™ã‚‹ã¨ã„ã†æµã‚Œï¼‰ã¯ã»ã¼åŒä¸€ã§ã™ã€‚
ã“ã®ã‚ˆã†ãªå ´åˆã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ã‚’é¿ã‘ã€ä¿å®ˆæ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã«ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãƒ†ã‚¹ãƒˆãŒæœ‰åŠ¹ã§ã™ã€‚

### ç›®çš„ã¨åˆ©ç‚¹

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãƒ†ã‚¹ãƒˆã¯ã€åŒã˜ãƒ†ã‚¹ãƒˆãƒ­ã‚¸ãƒƒã‚¯ã§è¤‡æ•°ã®å…¥åŠ›å€¤ã¨æœŸå¾…ã•ã‚Œã‚‹çµæœã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã§ã™ã€‚
åŒç¨®ã®äº‹å®Ÿã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã€1 ã¤ã®ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãƒ†ã‚¹ãƒˆã®ä¸»ãªåˆ©ç‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

1. **ã‚³ãƒ¼ãƒ‰é‡ã®å‰Šæ¸›** - åŒã˜ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¤‡æ•°å›æ›¸ãå¿…è¦ãŒãªããªã‚Šã¾ã™
2. **å¯èª­æ€§ã®å‘ä¸Š** - é–¢é€£ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒä¸€ç®‡æ‰€ã«ã¾ã¨ã¾ã‚Šã€ä¸€è¦§æ€§ãŒå‘ä¸Šã—ã¾ã™
3. **ä¿å®ˆæ€§ã®å‘ä¸Š** - ãƒ†ã‚¹ãƒˆãƒ­ã‚¸ãƒƒã‚¯ã®å¤‰æ›´ãŒ 1 ç®‡æ‰€ã§æ¸ˆã¿ã¾ã™
4. **ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®è¿½åŠ ãŒå®¹æ˜“** - æ–°ã—ã„ã‚±ãƒ¼ã‚¹ã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦è¿½åŠ ã™ã‚‹ã ã‘ã§æ¸ˆã¿ã¾ã™

### å®Ÿè£…ä¾‹

:::details JUnit

JUnit ã§ã¯ã€`@ParameterizedTest` ã¨ `@ValueSource` ã‚„ `@CsvSource` ãªã©ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ç”¨ã—ã¾ã™ã€‚

```java
public class DeliveryServiceTests {
    // é…é”æ—¥ã®æœ‰åŠ¹æ€§ã‚’æ¤œè¨¼ã™ã‚‹
    @ParameterizedTest
    @CsvSource({
        "-1, false", // éå»ã®æ—¥ä»˜ -> ä¸æ­£
        "0, false",  // å½“æ—¥ -> ä¸æ­£
        "1, false",  // ç¿Œæ—¥ -> ä¸æ­£
        "2, true"    // 2æ—¥å¾Œ -> æœ‰åŠ¹
    })
    public void Can_detect_an_invalid_delivery_date(int daysFromNow, boolean expected) {
        DeliveryService sut = new DeliveryService();
        LocalDate deliveryDate = LocalDate.now().plusDays(daysFromNow);

        Delivery delivery = new Delivery();
        delivery.setDate(deliveryDate);

        boolean isValid = sut.isDeliveryValid(delivery);

        assertEquals(expected, isValid);
    }
}
```

:::

:::details Vitest

Vitest ã§ã¯ã€`test.each`ã‚’ä½¿ç”¨ã—ã¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãƒ†ã‚¹ãƒˆã‚’å®Ÿè£…ã—ã¾ã™ã€‚

```typescript
import { test, expect } from "vitest";
import { DeliveryService } from "./DeliveryService";
import { Delivery } from "./Delivery";
import { addDays } from "date-fns";

test.each([
  [-1, false], // éå»ã®æ—¥ä»˜ -> ä¸æ­£
  [0, false], // å½“æ—¥ -> ä¸æ­£
  [1, false], // ç¿Œæ—¥ -> ä¸æ­£
  [2, true], // 2æ—¥å¾Œ -> æœ‰åŠ¹
])(
  "delivery with %i days from now has validity: %s",
  (daysFromNow, expected) => {
    const sut = new DeliveryService();
    const deliveryDate = addDays(new Date(), daysFromNow);

    const delivery = new Delivery({ date: deliveryDate });

    const isValid = sut.isDeliveryValid(delivery);

    expect(isValid).toBe(expected);
  }
);
```

ã‚ˆã‚Šèª­ã¿ã‚„ã™ã„å½¢å¼ã¨ã—ã¦ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆé…åˆ—ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼š

```typescript
test.each([
  { days: -1, valid: false, description: "éå»ã®æ—¥ä»˜" },
  { days: 0, valid: false, description: "å½“æ—¥" },
  { days: 1, valid: false, description: "ç¿Œæ—¥" },
  { days: 2, valid: true, description: "2æ—¥å¾Œä»¥é™" },
])("$description: $daysæ—¥å¾Œã®é…é”ã¯$validã§ã‚ã‚‹", ({ days, valid }) => {
  const sut = new DeliveryService();
  const deliveryDate = addDays(new Date(), days);

  const delivery = new Delivery({ date: deliveryDate });

  const isValid = sut.isDeliveryValid(delivery);

  expect(isValid).toBe(valid);
});
```

:::

### ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãƒ†ã‚¹ãƒˆã®ä½¿ã„åˆ†ã‘

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãƒ†ã‚¹ãƒˆã¯å¸¸ã«æœ€é©ã¨ã„ã†ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ç‰¹ã«æ³¨æ„ã™ã¹ãç‚¹ã¨ã—ã¦ï¼š

1. **æ­£å¸¸ç³»ã¨ç•°å¸¸ç³»ã®åˆ†é›¢**
   ä¸¡æ–¹ã‚’ 1 ã¤ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãƒ†ã‚¹ãƒˆã«ã¾ã¨ã‚ã‚‹ã¨ã€ãƒ†ã‚¹ãƒˆã®æ„å›³ãŒåˆ†ã‹ã‚Šã«ãããªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
   ä»¥ä¸‹ã®ä¾‹ã§ã¯ã€æ­£å¸¸ç³»ã¨ç•°å¸¸ç³»ã‚’åˆ¥ã€…ã®ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã«åˆ†ã‘ã¦ã„ã¾ã™ï¼š

   :::details JUnit

   ```java
   public class DeliveryServiceTests {
       // ä¸æ­£ãªé…é”æ—¥ã‚’æ¤œå‡ºã™ã‚‹
       @ParameterizedTest
       @ValueSource(ints = {-1, 0, 1})
       public void Detects_an_invalid_delivery_date(int daysFromNow) {
           DeliveryService sut = new DeliveryService();
           LocalDate deliveryDate = LocalDate.now().plusDays(daysFromNow);
           Delivery delivery = new Delivery();
           delivery.setDate(deliveryDate);

           boolean isValid = sut.isDeliveryValid(delivery);

           assertFalse(isValid);
       }

       // æœ€çŸ­ã®é…é”æ—¥ã¯å½“æ—¥ã‹ã‚‰2æ—¥å¾Œã§ã‚ã‚‹
       @Test
       public void The_soonest_delivery_date_is_two_days_from_now() {
           DeliveryService sut = new DeliveryService();
           LocalDate deliveryDate = LocalDate.now().plusDays(2);
           Delivery delivery = new Delivery();
           delivery.setDate(deliveryDate);

           boolean isValid = sut.isDeliveryValid(delivery);

           assertTrue(isValid);
       }
   }
   ```

   :::

   :::details Vitest

   ```typescript
   // ä¸æ­£ãªé…é”æ—¥ã‚’æ¤œå‡ºã™ã‚‹
   test.each([-1, 0, 1])(
     "detects an invalid delivery date: %i days from now",
     (daysFromNow) => {
       const sut = new DeliveryService();
       const deliveryDate = addDays(new Date(), daysFromNow);
       const delivery = new Delivery({ date: deliveryDate });

       const isValid = sut.isDeliveryValid(delivery);

       expect(isValid).toBe(false);
     }
   );

   // æœ€çŸ­ã®é…é”æ—¥ã¯å½“æ—¥ã‹ã‚‰2æ—¥å¾Œã§ã‚ã‚‹
   test("the soonest delivery date is two days from now", () => {
     const sut = new DeliveryService();
     const deliveryDate = addDays(new Date(), 2);
     const delivery = new Delivery({ date: deliveryDate });

     const isValid = sut.isDeliveryValid(delivery);

     expect(isValid).toBe(true);
   });
   ```

   :::

2. **è¤‡é›‘ãªæŒ¯ã‚‹èˆã„ã¸ã®é©ç”¨**
   ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®æŒ¯ã‚‹èˆã„ãŒè¤‡é›‘ã™ãã‚‹å ´åˆã¯ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãƒ†ã‚¹ãƒˆã‚’é¿ã‘ã€å€‹åˆ¥ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¨ã—ã¦å®Ÿè£…ã™ã‚‹æ–¹ãŒç†è§£ã—ã‚„ã™ããªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
